# Consensus AI 실행 가이드 (한국어)

논문 분석을 위한 Consensus AI 프로토타입 실행 방법을 단계별로 설명합니다.  
보유한 API 키만으로 여러 AI가 토의하여 최적의 분석 결과를 제안합니다.

---

## 📋 사전 준비

### 1. Python 설치 확인

터미널(또는 Mac의 경우 Terminal, Windows의 경우 CMD 또는 PowerShell)을 열고 아래 명령어를 입력하세요.

```bash
python3 --version
```

또는

```bash
python --version
```

**Python 3.8 이상**이 필요합니다. 설치되어 있지 않다면 [python.org](https://www.python.org/downloads/)에서 다운로드 후 설치하세요.

---

### 2. API 키 발급 (보유한 것만 사용 가능)

**모든 API 키가 필요하지 않습니다.** 보유한 API 키만 입력하면 해당 AI들이 토의에 참여합니다.

| AI | API 키 발급 링크 | 설명 |
|----|-----------------|------|
| **GPT (OpenAI)** | [platform.openai.com/api-keys](https://platform.openai.com/api-keys) | OpenAI 플랫폼에서 발급 |
| **Gemini (Google)** | [aistudio.google.com/app/apikey](https://aistudio.google.com/app/apikey) | Google AI Studio에서 발급 |
| **Perplexity** | [perplexity.ai/account/api/group](https://www.perplexity.ai/account/api/group) | Perplexity API 포털에서 발급 (API 그룹 생성 필요) |
| **Claude (Anthropic)** | [console.anthropic.com](https://console.anthropic.com/) | Anthropic 콘솔에서 발급 |

> 💡 **팁**: 앱 사이드바의 각 AI 옆 **🔗 API 키 발급 바로가기** 버튼을 누르면 해당 사이트로 바로 이동합니다.

---

## 🚀 설치 및 실행 방법

### 1단계: 프로젝트 폴더로 이동

터미널을 열고 Consensus AI 폴더로 이동합니다.

**Mac / Linux 예시:**

```bash
cd ~/Desktop/consensus_ai
```

**Windows 예시 (PowerShell):**

```powershell
cd C:\Users\사용자이름\Desktop\consensus_ai
```

> 💡 **팁**: 파일 탐색기에서 `consensus_ai` 폴더를 찾아, 빈 공간에서 마우스 오른쪽 클릭 → "터미널에서 열기" 또는 "여기서 터미널 열기"를 선택해도 됩니다.

---

### 2단계: 가상 환경 생성 (권장)

같은 컴퓨터의 다른 프로젝트와 충돌을 피하려면 가상 환경을 사용하는 것이 좋습니다.

```bash
python3 -m venv venv
```

그 다음 가상 환경을 활성화합니다.

**Mac / Linux:**

```bash
source venv/bin/activate
```

**Windows (CMD):**

```cmd
venv\Scripts\activate.bat
```

**Windows (PowerShell):**

```powershell
venv\Scripts\Activate.ps1
```

가상 환경이 활성화되면 터미널 앞에 `(venv)` 같은 표시가 생깁니다.

---

### 3단계: 필요한 라이브러리 설치

아래 명령어를 실행합니다.

```bash
pip install -r requirements.txt
```

설치되는 패키지:

- **streamlit**: 웹 앱 프레임워크
- **openai**: OpenAI(GPT), Perplexity API 클라이언트 (OpenAI 호환)
- **google-genai**: Google Gemini API 클라이언트
- **anthropic**: Anthropic Claude API 클라이언트
- **pymupdf**: PDF 텍스트 추출 (1주차: 복사-붙여넣기와의 결별)

설치가 끝나면 `Successfully installed ...` 메시지가 표시됩니다.

---

### 4단계: 앱 실행

다음 명령어를 입력합니다.

```bash
streamlit run app.py
```

실행되면 터미널에 다음과 비슷한 메시지가 나옵니다.

```
You can now view your Streamlit app in your browser.

Local URL: http://localhost:8501
Network URL: http://192.168.x.x:8501
```

브라우저가 자동으로 열리지 않으면, 위의 **Local URL**을 복사해 브라우저 주소창에 붙여넣으세요.

---

### 5단계: 앱 사용 방법

1. **사이드바**에서 보유한 API 키만 입력하고, **분석 모드**를 선택합니다.
   - **일반 모드 (단순 종합)**: 각 AI 답변 → 종합. 토큰 비용 절약.
   - **심층 토론 모드 (상호 비판)**: A 답변 → B 검토·지적 → A 수정 → 종합. 토큰 비용 2~3배. (최소 2개 AI 필요)

2. **메인 화면**에서 논문을 입력합니다. **두 가지 방식** 중 하나:
   - **PDF 업로드**: 논문 PDF를 업로드하면 자동으로 텍스트 추출 (복사-붙여넣기 불필요)
   - **텍스트 붙여넣기**: PDF 없이 직접 텍스트 입력

3. **분석 질문**을 입력합니다. (예: "이 논문의 핵심 기여점과 한계점을 분석해주세요.")

4. **🚀 분석 시작** 버튼을 클릭합니다.

5. 화면에 표시되는 결과:
   - **일반 모드**: 각 AI 초기 분석 → Consensus Report
   - **심층 토론 모드**: 각 AI 초기 답변 → 상호 검토(지적) → 수정안 → Consensus Report

---

## ❓ 문제 해결

### "command not found: python3" 또는 "python3을 찾을 수 없음"

- Windows에서는 `py` 명령어를 사용해 보세요: `py -m venv venv`
- Python이 PATH에 등록되지 않았다면, 설치 시 "Add Python to PATH" 옵션을 다시 확인하세요.

### "pip install" 시 오류가 발생할 때

다음처럼 `--upgrade pip`를 먼저 실행한 뒤 다시 시도해 보세요.

```bash
pip install --upgrade pip
pip install -r requirements.txt
```

### "API 키 오류" 또는 "Authentication failed"

- API 키를 정확히 복사했는지 확인하세요. 앞뒤 공백이 들어가지 않았는지도 확인합니다.
- 각 AI 서비스 콘솔에서 해당 API 키가 활성화되어 있는지 확인하세요.

### 앱이 느리거나 응답이 없을 때

- 여러 AI를 사용할 경우 API 호출이 30초~1분 이상 걸릴 수 있습니다.
- 인터넷 연결 상태를 확인하세요.

### 특정 AI만 오류가 날 때

- 해당 AI의 API 키와 모델 접근 권한을 확인하세요.
- 다른 AI가 정상 동작하면, 오류가 난 AI를 제외하고 나머지로 토의가 진행됩니다.

---

## 🛑 앱 종료 방법

앱을 종료하려면 터미널에서 **Ctrl + C**를 누르면 됩니다.

---

## 📁 프로젝트 구조

```
consensus_ai/
├── app.py              # 메인 앱 코드
├── requirements.txt    # 패키지 목록
└── 실행가이드.md       # 이 파일
```

추가로 궁금한 점이 있으면 주변 선배나 동료에게 물어보시거나, Python/Streamlit 관련 튜토리얼을 참고해 보세요.
